<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title> ScriptDoc Reference</title><link rel="stylesheet" href="images/shared.css" type="text/css"></head><body><h1> ScriptDoc Reference</h1><div class="content"><h2>Properties</h2><div class="list"><a name="#.submitPath"></a><h3>static&nbsp;<i>Object</i>&nbsp;submitPath.submitPath</h3><p class="padded">Creates a path by sending a request to the server. Receives a path_id in return once the path_id is returned, create edges based on edge_boundaries array: for i=0; i<edge_boundaries.length-1; i++ edgeStartPolyIndex = edge_boundaries(i); edgeEndPolyIndex = edge_boundaries(i+1); point_id = markerToPointDict.edgeStartInPoly; endpoint_id = markerToPointDict.edgeEndInPoly; extract poly.getPath() from startMarker to endMarker set edge description to an easily parseable version of the subpath. (TODO: Change the field to polyline - description should be human readable.)</p><dl class="details"></dl><a name="#.addToMap"></a><h3>static&nbsp;<i>Object</i>&nbsp;addToMap.addToMap</h3><p class="padded">Handles click events on a map: adds a new marker to the Polyline. creates a new Point for that marker. Create a marker at the coordinate that was clicked. Then, assign a click listener to the marker that pops open an info window over the marker.</p><dl class="details"></dl><a name="#.map"></a><h3>static&nbsp;<i>Object</i>&nbsp;map</h3><p class="padded">7/30/10: Maintain an overall polyline (poly) which is split up into smaller polylines representing the edges in a path. Maintain a list of indices at which to split the polyline (edge_boundaries). Split the polyline into edges at each point on edge_boundaries. The path and its edges are created at the same time as the boundary. Pre 7/3/10: I want to be able to click on a map and create points with each click. The points should give a popup form through which they can be updated. Subsequent points should be connected by a line representing the edge between them. The edge should be saved automatically. Eventually the line should be any shape between two points. After a path is complete it should be given a name? NOTE: I want a point to be created even if the form is not filled out. So basically an empty point is created along with the marker. Then, clicking on the marker reveals an infoWindow with a form and a 'Save' button Clicking 'Save' passes the form into the edit method of the point controller. A similar procedure can be applied for edges and paths. NOTE: A note on info windows. As far as I can tell, their content is associated with their location (or optionally, an anchor). They are not otherwise associated</p><dl class="details"></dl><a name="#.map"></a><h3>static&nbsp;<i>Object</i>&nbsp;map</h3><p class="padded">7/30/10: Maintain an overall polyline (poly) which is split up into smaller polylines representing the edges in a path. Maintain a list of indices at which to split the polyline (edge_boundaries). Split the polyline into edges at each point on edge_boundaries. The path and its edges are created at the same time as the boundary. Pre 7/3/10: I want to be able to click on a map and create points with each click. The points should give a popup form through which they can be updated. Subsequent points should be connected by a line representing the edge between them. The edge should be saved automatically. Eventually the line should be any shape between two points. After a path is complete it should be given a name? NOTE: I want a point to be created even if the form is not filled out. So basically an empty point is created along with the marker. Then, clicking on the marker reveals an infoWindow with a form and a 'Save' button Clicking 'Save' passes the form into the edit method of the point controller. A similar procedure can be applied for edges and paths. NOTE: A note on info windows. As far as I can tell, their content is associated with their location (or optionally, an anchor). They are not otherwise associated</p><dl class="details"></dl></div><h2>Functions</h2><div class="list"><a name="#.savePathForm"></a><h3>savePathForm()&nbsp;:&nbsp;static&nbsp;<i></i></h3><p class="padded">A form for creating the path. Has a field for the path name, the path description, and hidden fields containing the information for creating the edges.</p><dl class="details"></dl><a name="#.submitPath"></a><h3>submitPath()&nbsp;:&nbsp;static&nbsp;<i></i></h3><p class="padded">Creates a path by sending a request to the server. Receives a path_id in return once the path_id is returned, create edges based on edge_boundaries array: for i=0; i<edge_boundaries.length-1; i++ edgeStartPolyIndex = edge_boundaries(i); edgeEndPolyIndex = edge_boundaries(i+1); point_id = markerToPointDict.edgeStartInPoly; endpoint_id = markerToPointDict.edgeEndInPoly; extract poly.getPath() from startMarker to endMarker set edge description to an easily parseable version of the subpath. (TODO: Change the field to polyline - description should be human readable.)</p><dl class="details"></dl><a name="#.newPointForm"></a><h3>newPointForm(<i>MouseEvent</i>&nbsp;event,&nbsp;<i>Object</i>&nbsp;marker)&nbsp;:&nbsp;static&nbsp;<i></i></h3><p class="padded">A form for passing data about a point associated with the event (invoked by clicking a marker) form contains name, comment, longitude, and latitude for a point.</p><p class="padded"><table cellspacing="3" width="90%" class="parameter-table"><tr><td width="10%"><i>MouseEvent</i></td><td width="10%"><b>event</b></td><td width="80%"></td></tr><tr><td width="10%"><i>Object</i></td><td width="10%"><b>marker</b></td><td width="80%">is the marker associated with the mouse event.</td></tr></table></p><dl class="details"></dl><a name="#.createPoint"></a><h3>createPoint()&nbsp;:&nbsp;static&nbsp;<i></i></h3><p class="padded">7/30/10: Using a form (document), create a Point and return its point_id. Pre 7/30/10: Extracts data from marker and infoWindow and saves it into a point object NOTE: See page 53+ in "Beginning Google Maps Applications with Rails and Ajax" for reference Listing 3-6 has the controller code "in the HTML form we displayed on the map, the fields were named in an m [ fieldname ] bracketed formatâ€”for example, m [ lat ] . When aform is submitted to aRails action using the bracketed format, ActiveView converts all the bracketed strings to ahash, in this case under the key :m. After the action creates the marker, it saves it. Finally, it renders aJSON structure with two keys, :success and :content, which indicate whether the action is successful, and the HTML to be displayed, respectively. " TODO: Can probably copy operate_marker and its controller Looks like the XMLHttpRequest is what I need to use since GXmlHttp doesn't exist in Google Maps JS API V3 Following http://code.google.com/apis/maps/articles/phpsqlinfo_v3.html</p><dl class="details"></dl><a name="#.downloadUrl"></a><h3>downloadUrl(<i>Object</i>&nbsp;url,&nbsp;<i>Object</i>&nbsp;callback)&nbsp;:&nbsp;static&nbsp;<i></i></h3><p class="padded">a simple function which wraps the XMLHTTPRequest object that lets you retrieve files (commonly in XML format) via JavaScript. The downloadUrl() callback function will provide you with the content of the URL and the status code. If you use a framework like jQuery or YUI, you may want to replace this function with their respective wrapper functions.</p><p class="padded"><table cellspacing="3" width="90%" class="parameter-table"><tr><td width="10%"><i>Object</i></td><td width="10%"><b>url</b></td><td width="80%"></td></tr><tr><td width="10%"><i>Object</i></td><td width="10%"><b>callback</b></td><td width="80%"></td></tr></table></p><dl class="details"></dl><a name="#.addToMap"></a><h3>addToMap(<i>MouseEvent</i>&nbsp;event)&nbsp;:&nbsp;static&nbsp;<i></i></h3><p class="padded">Handles click events on a map: adds a new marker to the Polyline. creates a new Point for that marker. Create a marker at the coordinate that was clicked. Then, assign a click listener to the marker that pops open an info window over the marker.</p><p class="padded"><table cellspacing="3" width="90%" class="parameter-table"><tr><td width="10%"><i>MouseEvent</i></td><td width="10%"><b>event</b></td><td width="80%"></td></tr></table></p><dl class="details"></dl><a name="#.openInfoWindow"></a><h3>openInfoWindow(<i>Object</i>&nbsp;infoWindow,&nbsp;<i>Object</i>&nbsp;marker)&nbsp;:&nbsp;static&nbsp;<i></i></h3><p class="padded">Opens selected infoWindow over the selected marker after closing the previously opened infoWindow NOTE: If this wrapper function is omitted from the click listener at marker, then only data in the first open infoWindow will be saved to the database... I think.</p><p class="padded"><table cellspacing="3" width="90%" class="parameter-table"><tr><td width="10%"><i>Object</i></td><td width="10%"><b>infoWindow</b></td><td width="80%"></td></tr><tr><td width="10%"><i>Object</i></td><td width="10%"><b>marker</b></td><td width="80%"></td></tr></table></p><dl class="details"></dl></div></div></body></html>